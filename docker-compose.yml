version: '3'
services:
 
  rabbitmq:
    container_name: rabbitmq
    image: 'rabbitmq:management'
    ports:
      - "5672:5672"
      - "15672:15672"

  votingapi:
    container_name: votingapi
    build: ./
    ports:
      - "8080:8080"

  votingfront:
    container_name: votingfront
    build: ../ng-catsvdogs
    volumes:
      - '../ng-catsvdogs:/usr/src/app'
    ports:
      - "4200:4200"

  mysql-dev:
    image: mysql:8.0.2
    environment:
      MYSQL_ROOT_PASSWORD: password
      MYSQL_DATABASE: votingdb
    ports:
      - "3306:3306"

  worker:
    container_name: worker
    build: ../worker-catsvdogs
    ports:
      - "8081:8080"

  resultsapi:
    container_name: resultsapi
    build: ../resultsApi-catsvdogs
    volumes:
      - '../resultsApi-catsvdogs:/usr/src/app'
    ports:
      - "3000:3000"